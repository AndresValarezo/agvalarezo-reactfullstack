<!DOCTYPE html>
<html lang="en" >
   <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Api Rest</title> 
   </head>
   <body>
       <div>
            <label> Marca: </label>
            <input type="text" name="marca" id="lmarca" placeholder="Marca">
       </div>
       <div>
            <label> Model: </label>
            <input type="text" name="model" id="lmodel" placeholder="Model">
       </div>
       <br>
       <button type="button" id = "buttonAddCar" > ADD </button>

       <script>
            'use strict';
            window.addEventListener("DOMContentLoaded",_=>{
                document.querySelector("#buttonAddCar")
                    .addEventListener("click",addNewCar)
            });

            async function addNewCar() {
                const car= {
                    marca: lmarca.value,
                    model: lmodel.value
                }
            

                const result = await fetch(
                'http://localhost:5000/api/cars',
                {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                    },
                    body: JSON.stringify(car)
                }
                );
                const dates = await result.json();
                if(dates.ok)
                {
                    window.location= './showCars.html';
                }
            }
       </script>
   </body>


</html>